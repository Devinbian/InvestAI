<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…³æ³¨æ¿å—è®¾ç½® - å¤§åˆ†ç±»+å°åˆ†ç±»</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8fafc;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .title {
            font-size: 2rem;
            font-weight: 700;
            color: #1a202c;
            text-align: center;
            margin-bottom: 8px;
        }

        .subtitle {
            font-size: 1rem;
            color: #718096;
            text-align: center;
            margin-bottom: 40px;
        }

        .sectors-container {
            max-width: 1100px;
            margin: 0 auto;
        }

        .sectors-layout {
            display: flex;
            gap: 24px;
            min-height: 500px;
        }

        .left-panel {
            flex: 0 0 400px;
            background: #fafbfc;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #e5e7eb;
        }

        .right-panel {
            flex: 1;
            background: #ffffff;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #e5e7eb;
            min-height: 460px;
            display: flex;
            flex-direction: column;
        }

        .sector-section {
            margin-bottom: 32px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #f3f4f6;
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #18181b;
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 0;
        }

        .section-icon {
            font-size: 1.2rem;
        }

        .section-limit {
            font-size: 0.85rem;
            color: #6b7280;
            font-weight: 400;
        }

        .section-counter {
            font-size: 0.9rem;
            color: #059669;
            font-weight: 600;
            background: #d1fae5;
            padding: 4px 12px;
            border-radius: 20px;
        }

        /* å¤§åˆ†ç±»æ ·å¼ */
        .major-sectors-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .major-sector-option {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 16px;
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            position: relative;
            background: white;
        }

        .major-sector-option:hover:not(.disabled) {
            border-color: #d1d5db;
            background: #f9fafb;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .major-sector-option.selected {
            border-color: #18181b;
            background: #f8fafc;
            box-shadow: 0 4px 16px rgba(24, 24, 27, 0.15);
        }

        .major-sector-option.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .sector-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .sector-content {
            flex: 1;
        }

        .sector-label {
            font-size: 0.95rem;
            font-weight: 600;
            color: #18181b;
            margin-bottom: 4px;
        }

        .sector-desc {
            font-size: 0.8rem;
            color: #6b7280;
            line-height: 1.4;
        }

        .sector-check {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 24px;
            height: 24px;
            background: #18181b;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
        }

        /* å°åˆ†ç±»æ ·å¼ */
        .sub-sectors-container {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .sub-sector-group {
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            background: #fafbfc;
        }

        .group-title {
            font-size: 1rem;
            font-weight: 600;
            color: #18181b;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .group-icon {
            font-size: 1.2rem;
        }

        .sub-sectors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 10px;
        }

        .sub-sector-option {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 14px;
            transition: all 0.2s ease;
            cursor: pointer;
            display: flex;
            align-items: flex-start;
            gap: 10px;
            position: relative;
            background: white;
        }

        .sub-sector-option:hover:not(.disabled) {
            border-color: #d1d5db;
            background: #f9fafb;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .sub-sector-option.selected {
            border-color: #18181b;
            background: #f8fafc;
            box-shadow: 0 2px 8px rgba(24, 24, 27, 0.1);
        }

        .sub-sector-option.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .sub-sector-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .sub-sector-content {
            flex: 1;
        }

        .sub-sector-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: #18181b;
            margin-bottom: 4px;
        }

        .sub-sector-desc {
            font-size: 0.8rem;
            color: #6b7280;
            line-height: 1.3;
            margin-bottom: 4px;
        }

        .sub-sector-examples {
            font-size: 0.75rem;
            color: #9ca3af;
            font-style: italic;
        }

        .sub-sector-check {
            position: absolute;
            top: 6px;
            right: 6px;
            width: 18px;
            height: 18px;
            background: #18181b;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        /* é€‰æ‹©æç¤º */
        .sectors-hint {
            background: #fef3c7;
            border: 1px solid #fbbf24;
            border-radius: 12px;
            padding: 16px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-top: 20px;
        }

        .sectors-hint .hint-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .sectors-hint .hint-text {
            color: #92400e;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .summary {
            margin-top: 40px;
            padding: 24px;
            background: #f7fafc;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }

        .summary-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 16px;
            text-align: center;
        }

        .summary-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .summary-section {
            background: white;
            padding: 16px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .summary-section-title {
            font-size: 0.95rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 12px;
        }

        .summary-item {
            padding: 4px 0;
            font-size: 0.85rem;
            color: #4a5568;
        }

        @media (max-width: 768px) {
            .container {
                padding: 24px;
            }

            .sectors-layout {
                flex-direction: column;
                gap: 16px;
                min-height: auto;
            }

            .left-panel {
                flex: none;
            }

            .right-panel {
                min-height: auto;
            }

            .major-sectors-list {
                gap: 8px;
            }

            .major-sector-option {
                padding: 12px;
                gap: 10px;
            }

            .sector-icon {
                font-size: 1.3rem;
            }

            .sub-sectors-grid {
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .sub-sector-option {
                padding: 12px;
                gap: 8px;
            }

            .summary-content {
                grid-template-columns: 1fr;
                gap: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">å…³æ³¨æ¿å—è®¾ç½®</h1>
        <p class="subtitle">å¤§åˆ†ç±»+å°åˆ†ç±»å±‚çº§é€‰æ‹©ï¼ŒåŒ…å«èŠ¯ç‰‡åŠå¯¼ä½“ç­‰é‡ç‚¹è¡Œä¸š</p>
        
        <div class="sectors-container">
            <div class="sectors-layout">
                <!-- å·¦ä¾§ï¼šå¤§åˆ†ç±»é€‰æ‹© -->
                <div class="left-panel">
                    <div class="section-header">
                        <h4 class="section-title">
                            <span class="section-icon">ğŸ“Š</span>
                            é€‰æ‹©å¤§åˆ†ç±»
                            <span class="section-limit">(æœ€å¤šé€‰æ‹©2ä¸ª)</span>
                        </h4>
                        <div class="section-counter" id="majorCounter">
                            å·²é€‰æ‹© 0/2
                        </div>
                    </div>
                    
                    <div class="major-sectors-list" id="majorSectorsGrid">
                        <!-- åŠ¨æ€ç”Ÿæˆçš„å¤§åˆ†ç±»é€‰é¡¹ -->
                    </div>
                </div>

                <!-- å³ä¾§ï¼šç»†åˆ†è¡Œä¸šé€‰æ‹© -->
                <div class="right-panel">
                    <div id="subSectorContent" style="display: none;">
                        <div class="section-header">
                            <h4 class="section-title">
                                <span class="section-icon">ğŸ¯</span>
                                é€‰æ‹©ç»†åˆ†è¡Œä¸š
                                <span class="section-limit">(å¯é€‰æ‹©3-4ä¸ª)</span>
                            </h4>
                            <div class="section-counter" id="subCounter">
                                å·²é€‰æ‹© 0/4
                            </div>
                        </div>

                        <div class="sub-sectors-container" id="subSectorsContainer">
                            <!-- åŠ¨æ€ç”Ÿæˆçš„å°åˆ†ç±»é€‰é¡¹ -->
                        </div>
                    </div>

                    <!-- é€‰æ‹©æç¤º -->
                    <div class="sectors-hint" id="sectorsHint">
                        <div class="hint-icon">ğŸ’¡</div>
                        <div class="hint-text">
                            è¯·å…ˆåœ¨å·¦ä¾§é€‰æ‹©æ‚¨æ„Ÿå…´è¶£çš„å¤§åˆ†ç±»æ¿å—ï¼Œç„¶ååœ¨è¿™é‡Œé€‰æ‹©å…·ä½“çš„ç»†åˆ†è¡Œä¸š
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="summary">
            <div class="summary-title">æ‚¨çš„æ¿å—é€‰æ‹©æ€»ç»“</div>
            <div class="summary-content">
                <div class="summary-section">
                    <div class="summary-section-title">å¤§åˆ†ç±»æ¿å—</div>
                    <div id="majorSummary">æš‚æœªé€‰æ‹©</div>
                </div>
                <div class="summary-section">
                    <div class="summary-section-title">ç»†åˆ†è¡Œä¸š</div>
                    <div id="subSummary">æš‚æœªé€‰æ‹©</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å¤§åˆ†ç±»é…ç½®
        const majorSectorOptions = [
            {
                value: 'technology',
                label: 'ç§‘æŠ€æ¿å—',
                icon: 'ğŸ’»',
                desc: 'åŒ…å«äº’è”ç½‘ã€è½¯ä»¶ã€ç¡¬ä»¶ã€äººå·¥æ™ºèƒ½ç­‰ç§‘æŠ€ç›¸å…³è¡Œä¸š',
                color: '#3b82f6'
            },
            {
                value: 'finance',
                label: 'é‡‘èæ¿å—',
                icon: 'ğŸ¦',
                desc: 'åŒ…å«é“¶è¡Œã€ä¿é™©ã€è¯åˆ¸ã€æ”¯ä»˜ç­‰é‡‘èæœåŠ¡è¡Œä¸š',
                color: '#10b981'
            },
            {
                value: 'consumer',
                label: 'æ¶ˆè´¹æ¿å—',
                icon: 'ğŸ›ï¸',
                desc: 'åŒ…å«é£Ÿå“é¥®æ–™ã€æœè£…ã€å®¶ç”µã€é›¶å”®ç­‰æ¶ˆè´¹ç›¸å…³è¡Œä¸š',
                color: '#f59e0b'
            },
            {
                value: 'healthcare',
                label: 'åŒ»ç–—æ¿å—',
                icon: 'ğŸ¥',
                desc: 'åŒ…å«åŒ»è¯ã€åŒ»ç–—å™¨æ¢°ã€ç”Ÿç‰©æŠ€æœ¯ç­‰åŒ»ç–—å¥åº·è¡Œä¸š',
                color: '#ef4444'
            },
            {
                value: 'industrial',
                label: 'å·¥ä¸šæ¿å—',
                icon: 'ğŸ­',
                desc: 'åŒ…å«åˆ¶é€ ä¸šã€åŸºå»ºã€èƒ½æºã€ææ–™ç­‰ä¼ ç»Ÿå·¥ä¸šè¡Œä¸š',
                color: '#8b5cf6'
            },
            {
                value: 'emerging',
                label: 'æ–°å…´æ¿å—',
                icon: 'ğŸš€',
                desc: 'åŒ…å«æ–°èƒ½æºã€ç¯ä¿ã€å†›å·¥ç­‰æ–°å…´æˆ˜ç•¥æ€§è¡Œä¸š',
                color: '#06b6d4'
            }
        ];

        // å°åˆ†ç±»é…ç½®
        const subSectorOptions = [
            // ç§‘æŠ€æ¿å—ä¸‹çš„å°åˆ†ç±»
            {
                value: 'internet',
                label: 'äº’è”ç½‘',
                parent: 'technology',
                icon: 'ğŸŒ',
                desc: 'ç”µå•†ã€ç¤¾äº¤ã€æœç´¢ã€äº‘æœåŠ¡ç­‰äº’è”ç½‘å…¬å¸',
                examples: 'è…¾è®¯ã€é˜¿é‡Œå·´å·´ã€ç™¾åº¦'
            },
            {
                value: 'chips',
                label: 'èŠ¯ç‰‡åŠå¯¼ä½“',
                parent: 'technology',
                icon: 'ğŸ”¬',
                desc: 'èŠ¯ç‰‡è®¾è®¡ã€åˆ¶é€ ã€å°æµ‹ç­‰åŠå¯¼ä½“äº§ä¸šé“¾',
                examples: 'ä¸­èŠ¯å›½é™…ã€éŸ¦å°”è‚¡ä»½ã€ç´«å…‰å›½å¾®'
            },
            {
                value: 'software',
                label: 'è½¯ä»¶æœåŠ¡',
                parent: 'technology',
                icon: 'ğŸ’¾',
                desc: 'ä¼ä¸šè½¯ä»¶ã€æ¸¸æˆã€æ•™è‚²è½¯ä»¶ç­‰',
                examples: 'ç”¨å‹ç½‘ç»œã€æ’ç”Ÿç”µå­ã€ä¸‰å…­é›¶'
            },
            {
                value: 'ai',
                label: 'äººå·¥æ™ºèƒ½',
                parent: 'technology',
                icon: 'ğŸ¤–',
                desc: 'AIç®—æ³•ã€æœºå™¨å­¦ä¹ ã€æ™ºèƒ½ç¡¬ä»¶ç­‰',
                examples: 'ç§‘å¤§è®¯é£ã€æµ·åº·å¨è§†ã€å¤§åè‚¡ä»½'
            },
            
            // é‡‘èæ¿å—ä¸‹çš„å°åˆ†ç±»
            {
                value: 'banks',
                label: 'é“¶è¡Œ',
                parent: 'finance',
                icon: 'ğŸ›ï¸',
                desc: 'å›½æœ‰é“¶è¡Œã€è‚¡ä»½åˆ¶é“¶è¡Œã€åŸå•†è¡Œç­‰',
                examples: 'æ‹›å•†é“¶è¡Œã€å¹³å®‰é“¶è¡Œã€å®æ³¢é“¶è¡Œ'
            },
            {
                value: 'insurance',
                label: 'ä¿é™©',
                parent: 'finance',
                icon: 'ğŸ›¡ï¸',
                desc: 'äººå¯¿ä¿é™©ã€è´¢äº§ä¿é™©ç­‰ä¿é™©å…¬å¸',
                examples: 'ä¸­å›½å¹³å®‰ã€ä¸­å›½äººå¯¿ã€æ–°åä¿é™©'
            },
            {
                value: 'securities',
                label: 'è¯åˆ¸',
                parent: 'finance',
                icon: 'ğŸ“ˆ',
                desc: 'è¯åˆ¸å…¬å¸ã€åŸºé‡‘å…¬å¸ç­‰',
                examples: 'ä¸­ä¿¡è¯åˆ¸ã€åæ³°è¯åˆ¸ã€ä¸œæ–¹è´¢å¯Œ'
            },
            
            // æ¶ˆè´¹æ¿å—ä¸‹çš„å°åˆ†ç±»
            {
                value: 'food_beverage',
                label: 'é£Ÿå“é¥®æ–™',
                parent: 'consumer',
                icon: 'ğŸ·',
                desc: 'ç™½é…’ã€é¥®æ–™ã€é£Ÿå“åŠ å·¥ç­‰',
                examples: 'è´µå·èŒ…å°ã€äº”ç²®æ¶²ã€ä¼Šåˆ©è‚¡ä»½'
            },
            {
                value: 'retail',
                label: 'é›¶å”®',
                parent: 'consumer',
                icon: 'ğŸª',
                desc: 'è¶…å¸‚ã€ç™¾è´§ã€ç”µå•†é›¶å”®ç­‰',
                examples: 'æ°¸è¾‰è¶…å¸‚ã€è‹å®æ˜“è´­ã€ç‹åºœäº•'
            },
            {
                value: 'appliances',
                label: 'å®¶ç”µ',
                parent: 'consumer',
                icon: 'ğŸ“º',
                desc: 'ç™½è‰²å®¶ç”µã€é»‘è‰²å®¶ç”µç­‰',
                examples: 'ç¾çš„é›†å›¢ã€æ ¼åŠ›ç”µå™¨ã€æµ·å°”æ™ºå®¶'
            },
            
            // åŒ»ç–—æ¿å—ä¸‹çš„å°åˆ†ç±»
            {
                value: 'pharma',
                label: 'åŒ»è¯åˆ¶é€ ',
                parent: 'healthcare',
                icon: 'ğŸ’Š',
                desc: 'åŒ–å­¦è¯ã€ä¸­è¯ã€ç”Ÿç‰©è¯ç­‰',
                examples: 'æ’ç‘åŒ»è¯ã€äº‘å—ç™½è¯ã€ç‰‡ä»”ç™€'
            },
            {
                value: 'medical_devices',
                label: 'åŒ»ç–—å™¨æ¢°',
                parent: 'healthcare',
                icon: 'ğŸ©º',
                desc: 'åŒ»ç–—è®¾å¤‡ã€ä½“å¤–è¯Šæ–­ç­‰',
                examples: 'è¿ˆç‘åŒ»ç–—ã€é±¼è·ƒåŒ»ç–—ã€ä¹æ™®åŒ»ç–—'
            },
            
            // å·¥ä¸šæ¿å—ä¸‹çš„å°åˆ†ç±»
            {
                value: 'manufacturing',
                label: 'å…ˆè¿›åˆ¶é€ ',
                parent: 'industrial',
                icon: 'âš™ï¸',
                desc: 'æœºæ¢°è®¾å¤‡ã€ç²¾å¯†åˆ¶é€ ç­‰',
                examples: 'ä¸‰ä¸€é‡å·¥ã€ä¸­è”é‡ç§‘ã€å¾å·¥æœºæ¢°'
            },
            {
                value: 'materials',
                label: 'åŸºç¡€ææ–™',
                parent: 'industrial',
                icon: 'ğŸ—ï¸',
                desc: 'é’¢é“ã€æœ‰è‰²é‡‘å±ã€åŒ–å·¥ç­‰',
                examples: 'å®é’¢è‚¡ä»½ã€ç´«é‡‘çŸ¿ä¸šã€ä¸‡ååŒ–å­¦'
            },
            {
                value: 'infrastructure',
                label: 'åŸºç¡€è®¾æ–½',
                parent: 'industrial',
                icon: 'ğŸŒ‰',
                desc: 'å»ºç­‘ã€äº¤é€šã€å…¬ç”¨äº‹ä¸šç­‰',
                examples: 'ä¸­å›½å»ºç­‘ã€ä¸­å›½ä¸­é“ã€é•¿æ±Ÿç”µåŠ›'
            },
            
            // æ–°å…´æ¿å—ä¸‹çš„å°åˆ†ç±»
            {
                value: 'new_energy',
                label: 'æ–°èƒ½æº',
                parent: 'emerging',
                icon: 'ğŸ”‹',
                desc: 'å…‰ä¼ã€é£ç”µã€å‚¨èƒ½ã€æ–°èƒ½æºè½¦ç­‰',
                examples: 'å®å¾·æ—¶ä»£ã€æ¯”äºšè¿ªã€éš†åŸºç»¿èƒ½'
            },
            {
                value: 'environmental',
                label: 'ç¯ä¿',
                parent: 'emerging',
                icon: 'ğŸŒ±',
                desc: 'æ±¡æ°´å¤„ç†ã€å›ºåºŸå¤„ç†ã€å¤§æ°”æ²»ç†ç­‰',
                examples: 'ç¢§æ°´æºã€å¯è¿ªç¯å¢ƒã€é¾™å‡€ç¯ä¿'
            },
            {
                value: 'military',
                label: 'å†›å·¥',
                parent: 'emerging',
                icon: 'ğŸ›¡ï¸',
                desc: 'å†›å·¥è£…å¤‡ã€èˆªç©ºèˆªå¤©ç­‰',
                examples: 'ä¸­èˆªæ²ˆé£ã€èˆªå‘åŠ¨åŠ›ã€ä¸­ç›´è‚¡ä»½'
            }
        ];

        // ç”¨æˆ·é€‰æ‹©çŠ¶æ€
        const selectedSectors = {
            majorCategories: [],
            subCategories: []
        };

        // æ¸²æŸ“å¤§åˆ†ç±»
        function renderMajorSectors() {
            const grid = document.getElementById('majorSectorsGrid');
            grid.innerHTML = '';
            
            majorSectorOptions.forEach(option => {
                const isSelected = selectedSectors.majorCategories.includes(option.value);
                const isDisabled = !isSelected && selectedSectors.majorCategories.length >= 2;
                
                const element = document.createElement('div');
                element.className = `major-sector-option ${isSelected ? 'selected' : ''} ${isDisabled ? 'disabled' : ''}`;
                element.onclick = () => toggleMajorSector(option.value);
                
                element.innerHTML = `
                    <div class="sector-icon" style="color: ${option.color}">${option.icon}</div>
                    <div class="sector-content">
                        <div class="sector-label">${option.label}</div>
                        <div class="sector-desc">${option.desc}</div>
                    </div>
                    ${isSelected ? '<div class="sector-check">âœ“</div>' : ''}
                `;
                
                grid.appendChild(element);
            });
            
            // æ›´æ–°è®¡æ•°å™¨
            document.getElementById('majorCounter').textContent = `å·²é€‰æ‹© ${selectedSectors.majorCategories.length}/2`;
        }

        // æ¸²æŸ“å°åˆ†ç±»
        function renderSubSectors() {
            const container = document.getElementById('subSectorsContainer');
            const content = document.getElementById('subSectorContent');
            const hint = document.getElementById('sectorsHint');
            
            if (selectedSectors.majorCategories.length === 0) {
                content.style.display = 'none';
                hint.style.display = 'flex';
                return;
            }
            
            content.style.display = 'block';
            hint.style.display = 'none';
            container.innerHTML = '';
            
            selectedSectors.majorCategories.forEach(majorCategory => {
                const majorSector = majorSectorOptions.find(s => s.value === majorCategory);
                const subSectors = subSectorOptions.filter(sub => sub.parent === majorCategory);
                
                const groupElement = document.createElement('div');
                groupElement.className = 'sub-sector-group';
                
                const gridHtml = subSectors.map(subOption => {
                    const isSelected = selectedSectors.subCategories.includes(subOption.value);
                    const isDisabled = !isSelected && selectedSectors.subCategories.length >= 4;
                    
                    return `
                        <div class="sub-sector-option ${isSelected ? 'selected' : ''} ${isDisabled ? 'disabled' : ''}" 
                             onclick="toggleSubSector('${subOption.value}')">
                            <div class="sub-sector-icon">${subOption.icon}</div>
                            <div class="sub-sector-content">
                                <div class="sub-sector-label">${subOption.label}</div>
                                <div class="sub-sector-desc">${subOption.desc}</div>
                                <div class="sub-sector-examples">${subOption.examples}</div>
                            </div>
                            ${isSelected ? '<div class="sub-sector-check">âœ“</div>' : ''}
                        </div>
                    `;
                }).join('');
                
                groupElement.innerHTML = `
                    <div class="group-title">
                        <span class="group-icon">${majorSector.icon}</span>
                        ${majorSector.label}
                    </div>
                    <div class="sub-sectors-grid">
                        ${gridHtml}
                    </div>
                `;
                
                container.appendChild(groupElement);
            });
            
            // æ›´æ–°è®¡æ•°å™¨
            document.getElementById('subCounter').textContent = `å·²é€‰æ‹© ${selectedSectors.subCategories.length}/4`;
        }

        // åˆ‡æ¢å¤§åˆ†ç±»é€‰æ‹©
        function toggleMajorSector(value) {
            const index = selectedSectors.majorCategories.indexOf(value);
            if (index > -1) {
                // å–æ¶ˆé€‰æ‹©å¤§åˆ†ç±»æ—¶ï¼ŒåŒæ—¶ç§»é™¤è¯¥åˆ†ç±»ä¸‹çš„æ‰€æœ‰å°åˆ†ç±»
                selectedSectors.majorCategories.splice(index, 1);
                const subSectorsToRemove = subSectorOptions
                    .filter(sub => sub.parent === value)
                    .map(sub => sub.value);
                selectedSectors.subCategories = selectedSectors.subCategories
                    .filter(sub => !subSectorsToRemove.includes(sub));
            } else {
                // æ£€æŸ¥æ˜¯å¦å·²è¾¾åˆ°æœ€å¤§é€‰æ‹©æ•°é‡
                if (selectedSectors.majorCategories.length < 2) {
                    selectedSectors.majorCategories.push(value);
                }
            }
            
            renderMajorSectors();
            renderSubSectors();
            renderSummary();
        }

        // åˆ‡æ¢å°åˆ†ç±»é€‰æ‹©
        function toggleSubSector(value) {
            const index = selectedSectors.subCategories.indexOf(value);
            if (index > -1) {
                selectedSectors.subCategories.splice(index, 1);
            } else {
                // æ£€æŸ¥æ˜¯å¦å·²è¾¾åˆ°æœ€å¤§é€‰æ‹©æ•°é‡
                if (selectedSectors.subCategories.length < 4) {
                    selectedSectors.subCategories.push(value);
                }
            }
            
            renderSubSectors();
            renderSummary();
        }

        // æ¸²æŸ“æ€»ç»“
        function renderSummary() {
            const majorSummary = document.getElementById('majorSummary');
            const subSummary = document.getElementById('subSummary');
            
            if (selectedSectors.majorCategories.length === 0) {
                majorSummary.textContent = 'æš‚æœªé€‰æ‹©';
            } else {
                const majorLabels = selectedSectors.majorCategories.map(value => {
                    const sector = majorSectorOptions.find(s => s.value === value);
                    return sector ? sector.label : value;
                });
                majorSummary.innerHTML = majorLabels.map(label => 
                    `<div class="summary-item">${label}</div>`
                ).join('');
            }
            
            if (selectedSectors.subCategories.length === 0) {
                subSummary.textContent = 'æš‚æœªé€‰æ‹©';
            } else {
                const subLabels = selectedSectors.subCategories.map(value => {
                    const sector = subSectorOptions.find(s => s.value === value);
                    return sector ? sector.label : value;
                });
                subSummary.innerHTML = subLabels.map(label => 
                    `<div class="summary-item">${label}</div>`
                ).join('');
            }
        }

        // åˆå§‹åŒ–
        renderMajorSectors();
        renderSubSectors();
        renderSummary();
    </script>
</body>
</html> 
